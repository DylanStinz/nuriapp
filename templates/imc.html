{% extends "calculadora.html" %}
{% block contenido %}

<br><br>

<section>
  <div class="card shadow rounded-3 p-4" style="background-color:#b7aba4;">

    <!-- TÍTULO -->
    <h2 class="text-center mb-3 fw-bold ">Calculadora de IMC</h2>

    <!-- DESCRIPCIÓN -->
    <p class="text-center mb-4">
      Analiza tu Índice de Masa Corporal utilizando fórmulas profesionalmente validadas.
      Obtén tu estado nutricional y una recomendación personalizada.
    </p>

    <!-- FORMULARIO -->
    <form method="POST">
      <div class="d-flex justify-content-center gap-3 flex-wrap">

        <input type="number" name="altura" step="0.1"
               class="form-control border-0 rounded-3 py-2"
               style="background-color:#e0dad7; width: 280px;"
               placeholder="Altura (cm)" required>

        <input type="number" name="peso" step="0.1"
               class="form-control border-0 rounded-3 py-2"
               style="background-color:#e0dad7; width: 280px;"
               placeholder="Peso (kg)" required>

      </div>

      <div class="d-flex justify-content-center mt-4">
        <button type="submit"
                class="btn rounded-3 px-5 py-2 fw-semibold"
                style="background-color:#8F7570; color:white;">
          Calcular
        </button>
      </div>
    </form>

    <!-- RESULTADOS -->
    {% if imc is not none and estado %}
    <div class="mt-4 p-3 rounded-3" style="background-color:#e0dad7;">
      <h5 class="fw-bold mb-2">Resultados:</h5>

      <p><strong>IMC:</strong> {{ imc }}</p>
      <p><strong>Estado:</strong> {{ estado }}</p>

      {% if estado == "Bajo peso" %}
      <p class="small">Tu IMC indica bajo peso. Considera mejorar tu ingesta calórica para un mejor rendimiento y salud.</p>

      {% elif estado == "Normal" %}
      <p class="small">Tu IMC está en un rango saludable. Mantén una alimentación equilibrada y ejercicio regular.</p>

      {% elif estado == "Sobrepeso" %}
      <p class="small">Tu IMC indica sobrepeso. Ajustes pequeños a tu alimentación pueden ayudarte a mejorar tu bienestar.</p>

      {% elif estado == "Obesidad" %}
      <p class="small">Tu IMC indica obesidad. Considera hacer cambios en tu rutina y buscar apoyo profesional.</p>
      {% endif %}

{% if imagen_estado %}
            <div class="text-center mt-3">
              <img src="{{ url_for('static', filename=imagen_estado) }}"
                   alt="Estado IMC {{ estado }}"
                   class="img-fluid rounded-3 shadow-sm"
                   style="max-height:260px; object-fit:cover;">
            </div>
            {% endif %}

      {% if reproducir_audio %}
      <div class="text-center mt-3">
        <audio autoplay>
          <source src="{{ url_for('static', filename='audio/gelda.mp3') }}" type="audio/mpeg">
        </audio>
      </div>
      {% endif %}
    </div>
    {% endif %}

  </div>
</section>

{% endblock %}
